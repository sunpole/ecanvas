<!-- CHANGLOG MODAL START -->
<div class="modal-changelog" id="modalChangelog" tabindex="-1" aria-hidden="true">
  <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω -->
  <div class="modal-changelog-bg" aria-hidden="true"></div>
  <div class="modal-changelog-dialog">
    <div class="modal-changelog-header">
      <div class="modal-changelog-title">–ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</div>
      <nav class="changelog-nav">
        <a href="#v1-1-1" class="changelog-nav-link">1.1.1</a>
        <a href="#v1-1-0" class="changelog-nav-link">1.1.0</a>
        <a href="#v1-0-7" class="changelog-nav-link">1.0.7</a>
      </nav>
      <button class="close-btn" id="closeChangelog">–°–ü–ê–°–ò–ë–û –ó–ê –í–ù–ò–ú–ê–ù–ò–ï</button>
    </div>
    <div class="modal-changelog-body" id="changelogBody">
<pre>
<h3 id="v1-1-1">–í–µ—Ä—Å–∏—è 1.1.1</h3>
‚Äî –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–≤–µ—Ç–ª–æ–π –∏ —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã, –∞–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –ø–æ —Å–∏—Å—Ç–µ–º–µ, –∫–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º—ã
‚Äî –í—Å—è –≥–∞–º–º–∞ –∑–∞–≤–µ—Ä–Ω—É—Ç–∞ –≤ CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
‚Äî –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö, –ø–ª–∞–Ω—à–µ—Ç–æ–≤ –∏ –ü–ö
‚Äî –¶–≤–µ—Ç–æ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –¥–ª—è –∫–∞–Ω–≤–∞—Å–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
‚Äî –°—Ç–∞—Ä—Ç–æ–≤—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è changelog-—è–∫–æ—Ä–µ–π –≤ –º–æ–¥–∞–ª–∫–µ

<h3 id="v1-1-0">–í–µ—Ä—Å–∏—è 1.1.0</h3>
‚Äî –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ –ø–∞–Ω–µ–ª–∏ –Ω–∞ –ø–ª–∞–Ω—à–µ—Ç–∞—Ö –∏ –≤ landscape –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º
‚Äî –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–æ–ª—è —Å–æ –≤—Å–µ—Ö –∫—Ä–∞—ë–≤

<h3 id="v1-0-7">–í–µ—Ä—Å–∏—è 1.0.7</h3>
‚Äî –ë–∞–∑–æ–≤–∞—è —Å–µ—Ç–∫–∞ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è
‚Äî –§–∏–∫—Å—ã –ø–æ–¥–≤–∞–ª–æ–≤
</pre>
    </div>
  </div>
</div>

<style>
:root {
  --modal-bg: #fff;
  --modal-fg: #222;
  --modal-header-bg: #f6f7f9;
  --modal-header-border: #dadcdf;
  --modal-link: #20539f;
  --modal-link-bg: #d9e8fa;
  --modal-link-hover-bg: #b4cfed;
  --modal-link-hover: #11336b;
  --modal-shadow: #162e4a2e;
  --modal-overlay: rgba(24,27,33,.82);
}
html[data-theme='dark'] {
  --modal-bg: #21222b;
  --modal-fg: #e4e8ef;
  --modal-header-bg: #171821;
  --modal-header-border: #31323e;
  --modal-link: #9bbde7;
  --modal-link-bg: #232e40;
  --modal-link-hover-bg: #262d38;
  --modal-link-hover: #bad8ff;
  --modal-shadow: #000d;
  --modal-overlay: rgba(19,21,28,0.87);
}

/* --- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω --- */
.modal-changelog-bg {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  animation: bgFadeIn 0.5s ease;
}
@keyframes bgFadeIn {
  from { opacity: 0;}
  to {opacity: 1;}
}
/* –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ ‚Äî –∫–æ—Å–º–∏—á–µ—Å–∫–∏–µ –∑–≤—ë–∑–¥—ã */
html[data-theme="dark"] .modal-changelog-bg::before, 
html[data-theme="dark"] .modal-changelog-bg::after {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle, #fff8 1.2px, transparent 1.5px) 80px 70px/180px 220px repeat,
    radial-gradient(circle, #b3ecff55 1.1px, transparent 1.8px) 60px 140px/220px 300px repeat,
    radial-gradient(circle, #fff3 0.7px, transparent 1.0px) 110px 10px/300px 340px repeat,
    radial-gradient(circle, #aad4fa33 1.2px, transparent 1.5px) 20px 90px/150px 150px repeat,
    transparent;
  opacity: 0.57;
}
html[data-theme="dark"] .modal-changelog-bg::after {
  filter: blur(0.5px);
}
/* –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ ‚Äî –Ω–µ–±–æ, –æ–±–ª–∞–∫–∞, –ø—Ç–∏—á–∫–∏/–ø—è—Ç–Ω–∞ */
html[data-theme="light"] .modal-changelog-bg::before,
html[data-theme="light"]:not([data-theme]) .modal-changelog-bg::before {
  content: "";
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle, #e0eac733 1.3px, transparent 1.6px) 40px 20px/210px 320px repeat,
    radial-gradient(circle, #abd7fa33 1.6px, transparent 1.5px) 120px 70px/130px 220px repeat,
    radial-gradient(ellipse at 60% 80%, #e8f7fc33 16px 7px, transparent 14px) 1.2% 63% / 280px 30px no-repeat,
    radial-gradient(ellipse at 30% 60%, #fdf8f233 22px 8px, transparent 17px) 33% 53% / 330px 33px no-repeat,
    url('data:image/svg+xml;utf8,<svg width="90" height="26" xmlns="http://www.w3.org/2000/svg"><text x="3" y="20" font-size="2.1em" fill="gray" opacity="0.12">ùëâ</text><text x="50" y="13" font-size="1.7em" fill="gray" opacity="0.13">ùëâ</text></svg>') 35% 28% / 170px 32px no-repeat,
    url('data:image/svg+xml;utf8,<svg width="90" height="24" xmlns="http://www.w3.org/2000/svg"><text x="10" y="15" font-size="2em" fill="gray" opacity="0.14">ùëâ</text></svg>') 85% 46% / 160px 32px no-repeat,
    transparent;
  opacity: 0.3;
}
html[data-theme="light"] .modal-changelog-bg::after,
html[data-theme="light"]:not([data-theme]) .modal-changelog-bg::after {
  content: "";
  display: none;
}

/* --- MODAL core styles --- */
.modal-changelog {
  display: none;
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 4000;
  background: var(--modal-overlay);
  align-items: center;
  justify-content: center;
  overflow: auto;
  opacity: 0;
  transition: opacity 0.33s cubic-bezier(.77,.12,.34,.86);
  will-change: opacity;
}
.modal-changelog[aria-hidden="false"] {
  display: flex;
  opacity: 1;
  animation: modalAppear 0.46s cubic-bezier(.11,1.01,.31,.98);
}
@keyframes modalAppear {
  from { opacity: 0; }
  to { opacity: 1; }
}

.modal-changelog-dialog {
  background: var(--modal-bg);
  color: var(--modal-fg);
  border-radius: 16px;
  max-width: 95vw;
  width: 430px;
  min-width: 224px;
  box-shadow: 0 8px 38px var(--modal-shadow), 0 1px 4px #232a4833;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  max-height: 87vh;
  transform: scale(0.98) translateY(12px);
  opacity: .93;
  animation: dialogAppear 0.55s cubic-bezier(.13,.9,.38,1.07);
  will-change: transform, opacity;
}
.modal-changelog[aria-hidden="false"] .modal-changelog-dialog {
  transform: scale(1) translateY(0);
  opacity: 1;
  animation: dialogAppear 0.47s cubic-bezier(.33,1.05,.58,.98);
}
@keyframes dialogAppear {
  from { opacity: 0;  transform: scale(0.98) translateY(24px);}
  60% { opacity: .97; }
  to { opacity: 1;  transform: scale(1) translateY(0);}
}

.modal-changelog-header {
  background: var(--modal-header-bg);
  color: var(--modal-fg);
  border-bottom: 1px solid var(--modal-header-border);
  padding: 15px 20px 12px 22px;
  display: flex;
  flex-direction: column;
  position: sticky;
  top: 0;
  z-index: 10;
  box-shadow: 0 1px 8px #0001;
  backdrop-filter: blur(0.5px);
  user-select: none;
}

.modal-changelog-title {
  font-weight: bold;
  font-size: 1.14rem;
  margin-bottom: 8px;
  letter-spacing: 0.01em;
  text-shadow: 0 2px 12px #ffffff0a;
}
.changelog-nav {
  display: flex;
  flex-wrap: wrap;
  gap: .55em;
  margin-bottom: 11px;
}

.changelog-nav-link {
  color: var(--modal-link);
  background: var(--modal-link-bg);
  padding: 3px 10px;
  border-radius: 8px;
  font-size: .95em;
  font-weight: 500;
  text-decoration: none;
  transition: 0.17s;
  box-shadow: 0 1px 5px #0001;
}
.changelog-nav-link:hover,.changelog-nav-link:focus {
  background: var(--modal-link-hover-bg);
  color: var(--modal-link-hover);
  box-shadow:0 2px 7px #3331;
}

.close-btn {
  margin-top: 5px;
  font-family: inherit;
  font-size: 1.02rem;
  color: var(--modal-link);
  padding: 5px 16px;
  background: var(--modal-link-bg);
  border: none;
  border-radius: 9px;
  letter-spacing: 0.07em;
  cursor: pointer;
  align-self: flex-end;
  font-weight: 500;
  transition: background 0.16s, color 0.16s;
  box-shadow: 0 1px 8px #20539f0a;
}
.close-btn:hover, .close-btn:focus {
  background: var(--modal-link-hover-bg);
  color: var(--modal-link-hover);
}

.modal-changelog-body {
  background: var(--modal-bg);
  color: var(--modal-fg);
  overflow-y: auto;
  padding: 16px 17px 20px 19px;
  font-size: 1.01rem;
  line-height: 1.45;
  font-family: inherit, monospace;
  max-height: 56vh;
  min-height: 110px;
  scroll-behavior: smooth;
  transition: background 0.22s, color 0.22s;
  border-bottom-left-radius: 14px;
  border-bottom-right-radius: 14px;
}
.modal-changelog-body pre {
  margin: 0;
  font-family: inherit, monospace;
  font-size: 1.01rem;
  line-height: 1.43;
  white-space: pre-wrap;
}
.modal-changelog-body h3 {
  color: var(--modal-link);
  margin: 1.2em 0 0.3em 0;
  font-size: 1.09em;
  letter-spacing: .01em;
  text-shadow: 0 2px 8px #ffffff12;
  font-weight: bold;
}
/* MOBILE MODAL */
@media (max-width: 800px) {
  .modal-changelog-dialog { width: 98vw; min-width: 0; }
}
</style>

<script>
window.initChangelogModal = function(){
  const modal = document.getElementById('modalChangelog');
  const closeBtn = document.getElementById('closeChangelog');

  // –†–∞–±–æ—Ç–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
  function closeModal() {
    modal.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
  }

  // –ö–Ω–æ–ø–∫–∞ –°–ü–ê–°–ò–ë–û
  closeBtn.onclick = closeModal;

  // –ö–ª–∏–∫ –≤–Ω–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
  modal.addEventListener('mousedown', function(e){
    if(e.target === modal) closeModal();
  });

  // –ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ ESC
  modal.addEventListener('keydown', function(e){
    if(e.key === 'Escape') closeModal();
  });

  // –ù–∞–≤–∏–≥–∞—Ü–∏—è-—è–∫–æ—Ä—è
  document.querySelectorAll('.changelog-nav-link').forEach(link=>{
    link.addEventListener('click',function(e){
      e.preventDefault();
      const tgt = document.querySelector(this.hash);
      if(tgt) tgt.scrollIntoView({behavior:'smooth', block:'start'});
    });
  });

  // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å
  setTimeout(()=>modal.focus(),20);
};
</script>
<!-- CHANGLOG MODAL END -->
